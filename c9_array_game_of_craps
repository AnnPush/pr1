/*
Напишите программу, в которой разыгрываются 1000 партий в крепс и которая отвечает на каждый из следующих вопросов:
а) Сколько игр выигрывается при первом бросании, втором бросании, ..., двадцатом бросании и после двадцатого бросания?
в) Сколько игр проигрывается при первом бросании, втором бросании, ..., двадцатом бросании и после двадцатого бросания?
с) Какова вероятность выигрыша в крепс?(Замечание: вы должны знать, что крепс является одной из самых справедливых игр в казино.
   Как вы полагаете, что это означает?)
d) Какова средняя продолжительность игры в крепс?
е) Увеличиваются ли шансы на выигрыш при большей продолжительности игры?
*/



#include <stdio.h>
#include <stdlib.h>
#include <time.h>

enum Status {CONTINUE, WON, LOST};

int rollDice(void);

int main(void)
{
	srand(time(NULL));

	int myPoint;
	enum Status gameStatus;
	int game = 1;
	int won[22] = {0};
	int lost[22] = {0};
	int sum_w = 0;
	int sum_l = 0;
	int sum_t = 0;
	int chances = 1;

	while(game <= 1000)
	{
		int start = clock();
	    int n = 1;
		printf("\nGame %d\n", game);
		puts("___________");
	    int sum = rollDice();

	    switch(sum)
	    {
		    case 7:
		    case 11:
			    gameStatus = WON;
			    ++won[n];
		        break;

		    case 2:
		    case 3:
		    case 12:
			    gameStatus = LOST;
			    ++lost[n];
		        break;

		    default:
			    gameStatus = CONTINUE;
		        myPoint = sum;
			    printf("Point is %d\n", myPoint);
			    break;
	    }

		
   	    while (CONTINUE == gameStatus)
	    {
			n++;
		    sum = rollDice();

		    if (sum == myPoint)
		    {
			    gameStatus = WON;
				++won[n];
		    }
		    else
		    {
			    if (7 == sum)
			    {
				    gameStatus = LOST;
					++lost[n];
			    }
		    }
	    }

	    if (WON == gameStatus)
	    {
	        puts("___________");
		    puts("Player wins");
	    }
	    else
	    {
	        puts("___________");
		    puts("Player loses");
	    }
        int end = clock();
		sum_t += end - start;
		game++;		
	}

    printf("\n%10s%12s\n", "WON", "LOST");

	for (int i = 1; i < 22; i++ )
	{   
		sum_w += won[i];
		sum_l += lost[i];
		
        printf("%2d%8d%11d   \n", i, won[i], lost[i]);
	}

	chances = sum_w*100/1000;
	printf("\n Games are won: %d\n", sum_w);
	printf("\n Games are lost: %d\n", sum_l);
	printf("\n The chances of winning at craps: %d%\n", chances);
    printf("\n The average length of a game of craps: %d ms\n", sum_t/1000);	
}

int rollDice(void)
{
	int die1 = 1 + (rand() % 6);
	int die2 = 1 + (rand() % 6);

	printf("Player rolled %d + %d = %d\n", die1, die2, die1 + die2);
	return die1 + die2;
}


